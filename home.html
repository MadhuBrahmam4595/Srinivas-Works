<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Proforma for Inspection of ITI's</title>
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
		<style>
			body{background:#f5f7fb;color:#222}
			.card{border-radius:12px;box-shadow:0 6px 20px rgba(21,32,43,0.08)}
			h1{font-size:18px;font-weight:700}
			.header-green{background:#198754;color:#fff;padding:8px 12px;border-radius:6px;display:inline-block}
			.form-label{font-weight:600}
			.small-note{font-size:13px;color:#6c757d}
			@media print{body{background:#fff} .card{box-shadow:none}}
		</style>
	</head>
	<body>
		<div class="container py-5">
			<div class="row justify-content-center">
				<div class="col-lg-10">
					<div class="card p-4">
						<div class="d-flex justify-content-between align-items-center mb-3">
							<h1 class="mb-0 header-green">PROFORMA FOR INSPECTION OF ITI'S</h1>
							<small class="text-muted">Printed: <span id="printedDate"></span></small>
						</div>

						<form id="inspectionForm" autocomplete="off" novalidate>
							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4">
									<label for="rao_name" class="form-label">RAO Officer Name</label>
								</div>
								<div class="col-md-8">
									<div class="row g-2">
										<div class="col-sm-6">
											<input id="rao_name" name="rao_name" type="text" class="form-control" required>
											<div class="invalid-feedback">Please enter the RAO officer name.</div>
										</div>
										<div class="col-sm-6">
											<input id="rao_designation" name="rao_designation" type="text" class="form-control">
										</div>
									</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4"><label for="inspection_date" class="form-label">Date of Inspection</label></div>
								<div class="col-md-8">
									<input id="inspection_date" name="inspection_date" type="date" class="form-control" required>
									<div class="invalid-feedback">Please provide a valid inspection date (not in the future).</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4"><label for="iti_name" class="form-label">Name of the I.T.I.</label></div>
								<div class="col-md-8">
									<input id="iti_name" name="iti_name" type="text" class="form-control" required>
									<div class="invalid-feedback">Please enter the institute name.</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4"><label for="head_name" class="form-label">Head of Institute (I/C)</label></div>
								<div class="col-md-8">
									<input id="head_name" name="head_name" type="text" class="form-control" required>
									<div class="invalid-feedback">Please enter the head of institute name.</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-start">
								<div class="col-md-4"><label for="postal_address" class="form-label">Postal Address</label></div>
								<div class="col-md-8">
									<textarea id="postal_address" name="postal_address" class="form-control" rows="2" required></textarea>
									<div class="invalid-feedback">Please enter the postal address.</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4"><label for="landline" class="form-label">Land Line No.</label></div>
								<div class="col-md-8">
									<input id="landline" name="landline" type="tel" class="form-control" pattern="[0-9\-\s]{6,15}">
									<div class="invalid-feedback">Enter a valid land-line (6-15 digits).</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4"><label for="mobile" class="form-label">Mobile No.</label></div>
								<div class="col-md-8">
									<input id="mobile" name="mobile" type="tel" class="form-control" required pattern="\\d{10}">
									<div class="invalid-feedback">Enter a 10-digit mobile number (numbers only).</div>
								</div>
							</div>

							<div class="row g-3 mb-2 align-items-center">
								<div class="col-md-4"><label for="email" class="form-label">Eâ€‘Mail Address</label></div>
								<div class="col-md-8">
									<input id="email" name="email" type="email" class="form-control" required>
									<div class="invalid-feedback">Enter a valid email address.</div>
								</div>
							</div>

							<div class="row g-3 mb-3 align-items-start">
								<div class="col-md-4"><label for="remarks" class="form-label">Remarks / Notes</label></div>
								<div class="col-md-8">
									<textarea id="remarks" name="remarks" class="form-control" rows="3"></textarea>
								</div>
							</div>

							<div class="d-flex justify-content-end">
								<button type="submit" class="btn btn-primary me-2">Save</button>
								<button type="button" id="printBtn" class="btn btn-outline-secondary">Print</button>
							</div>
						</form>

						<div class="mt-3 small-note">Tip: Fields marked required must be filled. Data is saved locally in your browser when you save.</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Bootstrap JS (optional for components) -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
		<script>
			// show current date in header
			document.getElementById('printedDate').textContent = new Date().toLocaleDateString();

			// Set max date for inspection_date to today
			(function(){
				const dateInput = document.getElementById('inspection_date');
				if(dateInput){
					const today = new Date();
					const yyyy = today.getFullYear();
					const mm = String(today.getMonth()+1).padStart(2,'0');
					const dd = String(today.getDate()).padStart(2,'0');
					dateInput.max = `${yyyy}-${mm}-${dd}`;
				}
			})();

			// Validation logic using Bootstrap styles
			const form = document.getElementById('inspectionForm');
			form.addEventListener('submit', function(e){
				e.preventDefault();
				let valid = true;
				const elements = Array.from(form.querySelectorAll('input,textarea'));
				elements.forEach(el => {
					el.classList.remove('is-invalid');
				});

				// Use built-in validity and extra checks
				elements.forEach(el => {
					if(el.required && !el.value.trim()){
						el.classList.add('is-invalid');
						valid = false;
						return;
					}
					if(el.type === 'email' && el.value){
						// browser validity
						if(!el.checkValidity()){
							el.classList.add('is-invalid'); valid = false;
						}
					}
					if(el.pattern && el.value){
						const re = new RegExp('^'+el.getAttribute('pattern')+'$');
						if(!re.test(el.value)){
							el.classList.add('is-invalid'); valid = false;
						}
					}
				});

				// date not in future
				const dateEl = document.getElementById('inspection_date');
				if(dateEl && dateEl.value){
					const selected = new Date(dateEl.value);
					const today = new Date(); today.setHours(0,0,0,0);
					if(selected > today){ dateEl.classList.add('is-invalid'); valid = false; }
				}

				if(!valid){
					const firstInvalid = form.querySelector('.is-invalid');
					if(firstInvalid) firstInvalid.focus();
					return;
				}

				// Save to localStorage
				const data = {};
				new FormData(form).forEach((v,k)=>data[k]=v);
				try{ localStorage.setItem('inspectionForm', JSON.stringify(data)); }catch(err){}

				// show toast-like confirmation via alert (simple)
				alert('Form saved locally. You can now print or continue editing.');
			});

			// Print button
			document.getElementById('printBtn').addEventListener('click', function(){
				window.print();
			});

			// Live input: remove invalid when corrected
			form.querySelectorAll('input,textarea').forEach(el=>{
				el.addEventListener('input', ()=>el.classList.remove('is-invalid'));
			});
		</script>
	</body>
</html>

